(function(l){var e=window.AmazonUIPageJS||window.P,A=e._namespace||e.attributeErrors,a=A?A("DetailPageAlohaAssets",""):e;a.guardFatal?a.guardFatal(l)(a,window):a.execute(function(){l(a,window)})})(function(l,e,A){l.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(e,l,m,w,c,x){x=x||5E3;c=c||w;var n={items:[]};return{count:function(){return n.items.length},call:function(g){0<n.items.length&&a.$.ajax({url:g===A?e+"?ref_\x3ddp_atch_abb_atc":e+"?ref_\x3d"+g,xhrFields:{withCredentials:!0},
type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":l},data:JSON.stringify(n),timeout:x,success:m,error:w,abort:c})},addItem:function(a,b,c){n.items.push({asin:a,offerListingId:b,quantity:Number(c||1)})}}}}});"use strict";l.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(a,e,l,m){function w(){a.declarative("show-review-tab",
"click",function(g){a.$(g.$target).closest(c.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});a.declarative("add-to-cart","click",function(g){a.$(c.SB_ROOT+" "+c.SB_BUYBOX_ITEM_CHECKBOX+" "+c.INPUT_TYPE_CHECKBOX).filter(function(){return a.$(this).data("asin")===g.data.asin}).prop("checked",!0).change();a.$("[id^\x3dpopover-simpleBundle-]").each(function(){var b=e.get(a.$(this));b.isActive()&&b.hide()})});a.declarative("focus-image","mouseenter",function(a){var b=a.$target,e=b.parents(c.AUI_PAGE_ROOT);
a=a.data;e.find("#productImageMain-"+a.asin).attr("src",a.imageUrl);e.find(".thumbnail-group").removeClass("a-button-selected");e.find("#"+b.prop("name")).addClass("a-button-selected")})}var c={BUYBOX_ACCORDION:"#buyBoxAccordion",ADD_TO_CART_FORM:"#addToCart",ADD_TO_CART_ATTACH_BUTTON:"#add-to-cart-button.attach-dss-atc:button",INSTALLMENTS_ATTACH_BUTTON:"#installments-button.attach-dss-atc:button",OFFER_LISTING_ID:"#offerListingID",AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type\x3d'checkbox']",
BASE_PRODUCT_PRICE:"#base-product-price",BASE_PRODUCT_PRICE_DATA:"base-product-price",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",
SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"},x=!1,n=a.debounce(function(){var g=a.$(c.SB_ROOT);if(g.length){var b=a.$(c.ADD_TO_CART_FORM),e=b.find(":submit").length&&b.find(c.OFFER_LISTING_ID).val(),n=a.$(c.ADD_TO_CART_ATTACH_BUTTON),k=n.length,l=a.$(c.INSTALLMENTS_ATTACH_BUTTON),p=l.length;if(e||k){w();var y=m.getSimpleBundlePageState()||{},u=y.expandedBuyboxEnabled,q=y.selectionMode||
"SINGLE",r=y.items||[],G=y.csrfToken,H=y.cartEndpoint,f=[],v=g.find(c.SB_EXPANDED_MODAL_LINK),h,d={baseAsin:y.baseAsin,marketplaceId:y.marketPlaceId,baseItemPrice:a.$(c.BASE_PRODUCT_PRICE).data(c.BASE_PRODUCT_PRICE_DATA),clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:y.currencyOfPreferenceSupported||!1},t=m.createMetricsLogger(d);x||(x=!0,a.defer(function(){t.logNexusImpression(r)}));v.click(function(a){a.originalEvent&&t.logExpandedLink()});r.forEach(function(d,b){function p(){var d=
!1;e.click(function(){d=!d});g.find(c.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+b).click(function(){d||e.click();v.click();h=h||a.$(c.AUI_MODAL_SCROLLER);h.scrollTop(e.offset().top-h.offset().top+h.scrollTop())})}function k(){var h=g.find(c.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+b),f="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin\x3d"+d.asin+"\x26marketplaceId\x3d"+y.marketPlaceId+"\x26offerId\x3d"+d.offerListingId+"\x26activeTab\x3d0",p="a:expander:simple-bundle-item-expander-"+b+
":toggle",v=a.once(function(){h.load(f,null,function(d,f,b){a.$.trim(h.html())?(h.find(".a-span-last \x3e .a-spacing-top-base").remove(),h.find(".popover-add-to-cart-button").remove(),d=h.find("#a-page \x3e div \x3e div.a-row"),f=h.find(".popover-in-stock"),f.remove(),f.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),d.append(f),f=h.find(".popover-ship-sold-by"),f.remove(),f.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),d.append(f),f=h.find(".popover-retail-domain"),
f.remove(),d.append(f),d=h.find("#a-page \x3e div \x3e div.a-column.a-span9"),d.removeClass("a-span9"),d.addClass("a-span12")):h.text(y.ajaxFailMsg)})}),q=p+":expand";a.off(q);a.on(q,function(d){t.logItemLink(b);e.find(c.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");a.$.trim(h.html())||v()});p+=":collapse";a.off(p);a.on(p,function(d){e.find(c.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}var e=g.find(c.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+
b);if(u)p(),k();else{var r=g.find(c.SB_ACCESSORY_ITEM_LINK_PREFIX+b);r.unbind("click.MiniDpClickHandler");r.bind("click.MiniDpClickHandler",function(){t.logItemLink(b);t.logNexusOpenMiniDP(b,d)})}m.setupCheckboxes(f,b,u,d.asin,y.maxBuyboxItemsDesktop,c.SB_BUYBOX_CHECKBOX_PREFIX+b+" "+c.INPUT_TYPE_CHECKBOX,c.SB_EXPANDED_CHECKBOX_PREFIX+b+" "+c.INPUT_TYPE_CHECKBOX,c.SB_BUYBOX_CHECKBOX_PREFIX+b,c.SB_EXPANDED_CHECKBOX_PREFIX+b,q)});d=a.$(c.BUYBOX_ACCORDION);d.length?d.children().each(function(){b=a.$(this).find(c.ADD_TO_CART_FORM);
var d=b.find(c.ADD_TO_CART_ATTACH_BUTTON),h=b.find(c.INSTALLMENTS_ATTACH_BUTTON),p=d.length,g=h.length,q=b.find(c.SB_ROOT).length,v=b.find(":submit").length&&b.find(c.OFFER_LISTING_ID).val();q&&v&&m.setupAddToCart(b,f,r,t,H,G,u);p&&m.setupAddToCartForButton(d,f,r,t,u,b);g&&m.setupAddToCartForButton(h,f,r,t,u,b)}):(e&&m.setupAddToCart(b,f,r,t,H,G,u),k&&m.setupAddToCartForButton(n,f,r,t,u,b),p&&m.setupAddToCartForButton(l,f,r,t,u,b))}else g.hide()}},200);n();a.on("a:pageUpdate",n);a.on("attach:dss:initialized",
function(){a.off("a:pageUpdate",n);n()})});"use strict";l.when("A","a-checkbox","aloha-cartapi","aloha-buy-now-integration","aloha-buybox-form-util").register("aloha-simplebundle-common",function(a,D,E,m,w){function c(b,g){var c=a.$(b);c.change(function(){c.prop("checked",this.checked)});var q=a.$(g);q.length||(q=c);return{$element:c,$container:q,api:D(b),show:function(){q.hasClass(k.AUI_HIDDEN)&&q.removeClass(k.AUI_HIDDEN);q.show()},hide:function(){q.hasClass(k.AUI_HIDDEN)||q.addClass(k.AUI_HIDDEN)},
isVisible:function(){return!q.hasClass(k.AUI_HIDDEN)}}}function x(a,b,g){b.forEach(function(b){a.addItem(b.asin,b.offerListingId,b.quantity);g.logCheckboxSelected(b.index,b.quantity)})}function n(a,b,g){var c=[],e=[];b.forEach(function(b,k){var f=a[k];b.api.isChecked()?c.push({asin:f.asin,offerListingId:f.offerListingId,ourPrice:f.ourPrice,ourPriceAmount:f.ourPriceAmount,ourPriceSymbol:f.ourPriceSymbol,ourPriceCode:f.ourPriceCode,index:k,quantity:g}):e.push({asin:f.asin,ourPrice:f.ourPrice,ourPriceAmount:f.ourPriceAmount,
ourPriceSymbol:f.ourPriceSymbol,ourPriceCode:f.ourPriceCode,index:k,isVisible:b.isVisible()})});return{selectedLineItems:c,unselectedItems:e}}var g=/[^\d,\.]/g,b=/,/g,F=/\./g,z=/(^\D+|\D+$)/,k={AUI_HIDDEN:"aok-hidden"},A=!1;return{createMetricsLogger:function(c){function k(a,b){e.ue&&e.ue.count&&e.ue.count("aloha-simplebundle-"+a,b)}function u(){var a;a=c.currencyOfPreferenceSupported?{priceFormatted:c.baseItemPrice,priceDecimal:null,currencySymbol:null}:n(c.baseItemPrice);return{baseAsin:c.baseAsin,
baseItemPrice:a.priceFormatted,baseItemCurrencySymbol:a.currencySymbol,baseItemPriceDecimal:a.priceDecimal,clientType:c.clientType,feature:"abb"}}function q(a,b){e.ue&&e.ue.event&&(a.requestId=l,a.producerId="atch",a.obfuscatedMarketplaceId=c.marketplaceId,e.ue.event(a,"atch",b,{ssd:!0}))}function r(a){return c.currencyOfPreferenceSupported?{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:n(a.ourPrice)}function n(a){a=a||"";var c=a.lastIndexOf(","),
h=a.lastIndexOf("."),d;c>h?(h=F,d=b):(h=b,d=F);(c=a.match(z))&&(c=c[0].trim());h=a.replace(g,"").replace(h,"").replace(d,".");h=parseFloat(h);return{priceFormatted:a,currencySymbol:c,priceDecimal:h}}var l=Date.now().toString(10)+Math.random().toString(16).substring(2,13);a.defer(function(){k("view",1)});return{logAddToCart:function(a){k("addtocart",a)},logExpandedLink:function(){k("buybox-expanded-link",1)},logCheckboxSelected:function(a,b){k("checkbox-"+(a+1),b)},logItemLink:function(a){k("link-"+
(a+1),1)},logNexusImpression:function(a){var b=u();b.accessories=a.map(function(a,b){var c=r(a);return{asin:a.asin,displayPosition:b+1,price:c.priceFormatted,currencySymbol:c.currencySymbol,priceDecimal:c.priceDecimal}});q(b,"attach.ABBImpression.5")},logNexusAddBaseToCart:function(a,b,h){var d=u();d.baseQuantity=Number(h);d.accessoriesAdded=a.map(function(a){var b=r(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:b.priceFormatted,currencySymbol:b.currencySymbol,
priceDecimal:b.priceDecimal}});d.accessoriesNotAdded=b.map(function(a){var b=r(a);return{asin:a.asin,displayPosition:a.index+1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});q(d,"attach.ABBAddBaseToCart.9")},logNexusOpenMiniDP:function(a,b){var h=r(b),d=u();d.accessoryAsin=b.asin;d.accessoryDisplayPosition=Number(a)+1;d.accessoryPrice=h.priceFormatted;d.accessoryItemCurrencySymbol=h.currencySymbol;d.accessoryItemPriceDecimal=h.priceDecimal;q(d,"attach.ABBShowMiniDP.4")}}},
getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},getCheckboxCollectionObject:c,setupAccessoryAddToCart:function(b,c,g,q){function r(b,d,c,I){var p=E.createAddToCartRequest(g,q,function(a){n(b);f.push({asin:d.asin,offerListingId:d.offerListingId,ourPrice:d.ourPrice,ourPriceAmount:d.ourPriceAmount,ourPriceSymbol:d.ourPriceSymbol,ourPriceCode:d.ourPriceCode,index:c,quantity:1});l.when("EWC").execute("abb-everywhere-cart",
function(a){a.refresh()});var g=a.entity.count.entity.items;l.when("nav.setCartCount").execute("abb-nav-cart",function(a){a(g)})},function(){a.$("#abb_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#abb_add_accessory_error_"+b).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_error_"+b).removeClass(k.AUI_HIDDEN);e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},
{logLevel:"ERROR",attribution:"SimpleBundle"})});p.addItem(b,d.offerListingId);p.call(I)}function n(b){a.$("#abb_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#abb_add_accessory_alert_"+b).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_alert_"+b).removeClass(k.AUI_HIDDEN)}var m=[],f=[],v=[];A||(A=!0,a.$(".simpleBundleSection").each(function(b,d){a.$(d).closest("#simpleBundleV2_feature_div").length||a.$(d).closest("#simpleBundle_feature_div").length||
d.remove()}),b.forEach(function(a,b){m.push({asin:a.asin,offerListingId:a.offerListingId,ourPrice:a.ourPrice,ourPriceAmount:a.ourPriceAmount,ourPriceSymbol:a.ourPriceSymbol,ourPriceCode:a.ourPriceCode,index:b,quantity:1})}),a.declarative("abb-accessory-add","click",function(c){var d=c.data;c=d.asin;for(var g,f=0;f<b.length;f++)if(b[f].asin===c){g=f;break}f=b[g];d=d.atcRefmarker;a.$("#abb_accessory_add_button_"+c).addClass(k.AUI_HIDDEN);a.$("#minidp_accessory_add_button_"+c).addClass(k.AUI_HIDDEN);
a.$("#abb_add_accessory_spinner_"+c).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+c).removeClass(k.AUI_HIDDEN);r(c,f,g,d)}),e.addEventListener("beforeunload",function(){m.forEach(function(a){f.some(function(b){return b.asin===a.asin})||v.push(a)});c.logNexusAddBaseToCart(f,v,1)}))},setupAddToCart:function(b,c,g,k,r,l,D){function f(b,f){if(v){var p=a.$(b.currentTarget);if(m.isBuyNow(p)){var B=D?1:h.find("*[name\x3d'quantity']").val()||1,C=n(g,c,B);m.checkoutWith(C.selectedLineItems,
p)}else return}var z=E.createAddToCartRequest(r,l,function(){f()},function(){e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});f()}),B=D?1:h.find("*[name\x3d'quantity']").val()||1,C=n(g,c,B);x(z,C.selectedLineItems,k);p=C.unselectedItems.filter(function(a){return a.isVisible});k.logNexusAddBaseToCart(C.selectedLineItems,p,B);B=z.count();0!==B&&(p=a.$(b.currentTarget),m.isBuyNow(p)?
m.checkoutWith(C.selectedLineItems,p):(v=!0,b.preventDefault(),k.logAddToCart(B),z.call()))}var v=!1,h=b;b.unbind("submit.SimpleBundleSubmitHandler");b.bind("submit.SimpleBundleSubmitHandler",function(b){var c=a.$(this);f(b,function(){c.submit()})});b.find(":submit").unbind("click.SBB");b.find(":submit").bind("click.SBB",function(b){var c=a.$(this),g=c.closest(".a-accordion-row-container");g.length&&(h=g,f(b,function(){c.click()}))})},setupAddToCartForDeclarative:function(a,b,c,g,k,m,z,f){a.unbind("click.SimpleBundleClickHandler");
a.bind("click.SimpleBundleClickHandler",function(a){a=E.createAddToCartRequest(k,m,function(){l.now("attach-external-atc-interceptor").execute(function(a){a&&d.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},function(){e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});var h=z?1:f.find("*[name\x3d'quantity']").val()||1,d=n(c,b,h);x(a,d.selectedLineItems,
g);var p=d.unselectedItems.filter(function(a){return a.isVisible});g.logNexusAddBaseToCart(d.selectedLineItems,p,h);if(h=a.count())g.logAddToCart(h),a.call()})},setupCheckboxes:function(a,b,g,k,e,n,l,f,m,h){var d=c(n,f);a.push(d);d.api.enable();d.$element.data("asin",k);if(g){var t=c(l,m);t.api.enable();t.api.check(d.api.isChecked());t.$element.change(function(){var a=t.api.isChecked();d.api.check(a)});d.$element.change(function(){var b=d.api.isChecked();t.api.check(b);var c=0;a.forEach(function(a){c<
e&&a.api.isChecked()?(c++,a.show()):a.hide()});c<e&&a.forEach(function(a){c<e&&a.api.isUnchecked()&&(c++,a.show())})})}else"SINGLE"===h&&d.$element.change(function(){d.api.isChecked()&&a.forEach(function(a,c){b!==c&&a.api.uncheck()})});0<a.length&&a[0].$element.change()},setupAddToCartForButton:function(b,c,g,k,e,m){function z(){var a=e?1:f.find("*[name\x3d'quantity']").val()||1,b=n(g,c,a);w.addItems(m,b.selectedLineItems,k);var d=b.unselectedItems.filter(function(a){return a.isVisible});l.now("attach-external-atc-interceptor").execute(function(a){a&&
b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});k.logNexusAddBaseToCart(b.selectedLineItems,d,a);k.logAddToCart(b.selectedLineItems.length)}var f=m;b.unbind("click.button.SBB");b.bind("click.button.SBB",function(){var b=a.$(this).closest(".a-accordion-row-container");b.length&&(f=b);z()})}}});"use strict";l.when("ready").register("aloha-buy-now-integration",function(){var a={};l.when("turbo-checkout-buy-now-integration").execute(function(e){a=e});return{isBuyNow:function(e){return"function"===
typeof a.isBuyNow&&a.isBuyNow(e)},checkoutWith:function(e,l){return a.checkoutWith(e,l)}}});"use strict";l.when("A").register("aloha-buybox-form-util",function(a){function e(a,b,c){var l="items["+a+".abb]";b.forEach(function(a){l+="["+a+"]"});a=document.createElement("input");a.type="hidden";a.name=l;a.value=c;a.classList.add("aloha-accessory-form-input");return a}function l(a,b){var c=a.elements.namedItem(b.name);c&&a.removeChild(c);a.appendChild(b)}function m(a,b){l(a,e(b.index,["asin"],b.asin));
l(a,e(b.index,["offerListingId"],b.offerListingId));l(a,e(b.index,["quantity"],b.quantity))}function w(a){for(var b=2;0<a.find('input[name\x3d"asin.'+b+'"]').length||0<a.find('input[name\x3d"offeringID.'+b+'"]').length;)b++;return b}function c(a,b){for(;0<a.find('input[name\x3d"asin.'+b+'"]').length||0<a.find('input[name\x3d"offeringID.'+b+'"]').length;)b++;return b}function x(c,b){return[a.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+b,value:c.asin,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",
{type:"hidden",name:"offeringID."+b,value:c.offerListingId,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+b,value:c.quantity||1,class:"aloha-accessory-form-input"})]}var n=[];a.on("aloha:detailPage:reappear",function(){n=[];a.$(".aloha-accessory-form-input").remove()});return{addItems:function(a,b,e){var l=w(a);b.forEach(function(b){if(b!==A&&b.asin&&b.offerListingId){l=c(a,l);var w=x(b,l);w.forEach(function(b){a.append(b)});m(a.get(0),b);n.push(w);l++;
e&&e.logCheckboxSelected(b.index,b.quantity)}});b=a.find('input[name\x3d"itemCount"]');0===b.length?a.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+l+'"\x3e'):b[0].value=Math.max(b[0].value,l)}}})});