'use strict';mix_d("VSEDistributionCards__vse-vw-dp-card:vse-vw-dp-card__iXUpTzM7","exports tslib @p/A @c/scoped-dom @c/weblabs @c/logger @c/metrics @p/a-modal @c/aui-untrusted-ajax @c/navigation @c/aui-carousel @c/browser-window".split(" "),function(oa,A,Ma,Na,Oa,Pa,Y,Qa,Ra,Sa,Ta,Ua){function w(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var b=w(Ma),E=w(Na),Va=w(Oa),Wa=w(Pa),Xa=w(Qa),Ya=w(Ra),pa=w(Sa),Za=w(Ta),K=w(Ua),x,B=function(a,c){Object.keys(a).length!==c.requiredNumOfFields&&
Y.count("invalidNumOfFields-"+c.producerId,1);a=JSON.stringify(a).replace(/\\\\/g,"");Y.event(JSON.parse(a),c.producerId,c.schemaId,{ssd:!1})},$a=function(a){return function(c){return b["default"].$.extend({eventSource:a.eventSource,placementContext:a.placementContext,clientId:a.clientId,timestamp:new Date,userAgentData:navigator.userAgent,titleSessionId:"0",videoAsin:"",videoAsinList:a.videoAsinList||"",creativeId:a.creativeId,stringPayload:a.stringPayload||""},c)}},d={pageType:"",clientPrefix:"",
deviceType:"",placement:"",metricsPlacement:"",cardId:"",creativeId:"",requester:"",buildCsmPayload:function(a){}},q=function(a,c){void 0===c&&(c=1);try{Y.count("vse:csm:cards:"+d.clientPrefix+":"+a,c)}catch(e){r("failed to post CSM metric","ERROR")}},F=function(a,c){void 0===c&&(c=1);q(a+":"+d.deviceType,c)},r=function(a,c){Wa["default"].log("VSEWidgetCards: "+a+". Client prefix: "+d.clientPrefix+", Page type: "+d.pageType,c,"VSEDistributionCards")},qa=function(a,c,e){try{if(b["default"].$("."+d.cardId).length){var h=
!1,g=c.map(function(l){return l.contentId}).join(","),k=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetRendered",intPayload:1,videoAsinList:g});B(k,x);q("cardWidgetRendered",1);var m=function(){for(var l=e.carouselItemClassName,p=0;p<c.length;p++)if(!c[p].impressionRecorded){var n=b["default"].$("."+d.cardId+" ."+l+":nth-child("+(p+1)+")");if(b["default"].onScreen(n,0))n=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailImpression",intPayload:p,videoAsin:c[p].contentId}),B(n,x),c[p].impressionRecorded=
!0;else break}},f=function(){if(h)b["default"].off(b["default"].constants.BROWSER_EVENTS.SCROLL,f);else{var l=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:g}),p=b["default"].$("."+d.cardId+" ."+e.carouselItemClassName).first();p&&b["default"].onScreen(p,0)&&(B(l,x),l=b["default"].now()-a,q("cardWidgetScrolledInViewTime",l),F("cardWidgetScrolledInView"),h=!0,m())}};f();b["default"].on(b["default"].constants.BROWSER_EVENTS.SCROLL,f);b["default"].on("vse:"+
d.clientPrefix+":searchform:focus",function(){var l=d.buildCsmPayload({eventName:d.clientPrefix+":serchFormFocus",intPayload:1,videoAsinList:g});B(l,x)});e.widgetMetricsHandler(m,function(l){var p=d.buildCsmPayload({eventName:d.clientPrefix+":"+l+":paginationButtonClicked",intPayload:1});q(l+":paginationButtonClicked",1);B(p,x)})}}catch(l){r("Error occurred while emitting widget metrics "+l,"ERROR"),q("widgetMetricsEmissionError")}},ab=function(a,c){var e=[];a=a.split(",");0<a.length&&a.forEach(function(h){h=
h.split(":");1<h.length&&e.push({name:h[0],assignment:h[1],ignoreForG2S2Key:c})});return e},Z=function(a,c,e,h,g){void 0===g&&(g=3);g--;Ya["default"].post(a,{accepts:"*/*",contentType:"application/json;charset=UTF-8",timeout:3E3},c).then(function(k){e(k)}).catch(function(k){0===k.statusCode?r("Request has failed with unknown status code. Payload: "+JSON.stringify(c),"ERROR"):0<g?Z(a,c,e,h,g):h(k)})},bb=function(a,c){a="/gp/mobile/tag/?ref=vse_cards_ingress"+a+c.replace("/?_encoding=UTF8","");Z(a,
{},function(){},function(){})},cb=function(a,c,e,h,g,k){void 0===k&&(k=!0);var m=a.map(function(f){delete f.htmlEl;return f});c||(c=ra(a[0],{}));a=[];e.weblabContext&&(a=ab(e.weblabContext,!0));Z(e.nilgiriEndpoint,{requester:d.requester,clientPrefix:d.clientPrefix,page:d.pageType,placement:d.placement,device:d.deviceType,metadata:{id:"vse-video-widget-card",celQueryStringParam:e.celQueryStringParam,requestHasVideoData:"true"},videoDataList:k?m:void 0,video:{contentID:c.contentId,contentIDType:"VIDEO_ID",
videoURL:c.videoUrl,imageURL:c.imageUrl,vendorCode:c.vendorCode,vendorTrackingId:c.vendorTrackingId,videoReferenceId:c.videoReferenceId,videoTitle:c.title},marketplaceID:e.marketplaceId,locale:e.locale,product:{contentID:c.productAsin,contentIDType:"ASIN",parentContentID:c.parentAsin,parentContentIDType:"ASIN"},creativeId:d.creativeId,weblabContext:a},h,g)},ra=function(a,c){var e=a.productAsin;e||b["default"].objectIsEmpty(a.metadata.relatedProductsAsins)||(e=a.metadata.relatedProductsAsins.split(",")[0]);
var h=a.contentId,g=a.metadata.title,k=a.metadata.vendorName,m=a.metadata.vendorCode,f=a.metadata.entityId,l=a.metadata.entityType,p=a.metadata.fullReviewLink,n=a.metadata.title,C=a.metadata.videoURL,t=a.metadata.formattedDuration,O=a.metadata.videoImageUrl,P=a.parentAsin,Q="vse-cards-ingress"+a.index,db=a.metadata.relatedProductsAsins,eb=a.metadata.vendorTrackingId,fb=a.metadata.referenceId,gb=a.index,D=a.metadata.closedCaptions,sa=[];if(D&&(D=D.split(","),0===D.length%2))for(var R=0;R<D.length;R+=
2)void 0!==D[R+1]&&sa.push({locale:D[R],url:D[R+1]});c={contentId:h,title:g,vendorName:k,vendorCode:m,entityId:f,entityType:l,referenceUrl:p,referenceLinkTitle:n,videoUrl:C,duration:t,imageUrl:O,videoVoteContainer:{},productAsin:e,parentAsin:P,refTag:Q,relatedProducts:db,vendorTrackingId:eb,videoReferenceId:fb,index:gb,$el:c,closedCaptions:sa,videoDetailPageLink:a.metadata.videoDetailPageLink,impressionRecorded:a.impressionRecorded,lastPlayingTimestamp:a.lastPlayingTimestamp,htmlEl:a.htmlEl,aciContentId:a.metadata.aciContentId,
videoMimeType:a.metadata.videoMimeType,profileLink:a.metadata.profileLink,profileImageUrl:a.metadata.profileImageUrl};"true"===a.metadata.isSponsoredBrandVideo&&(h={adFeedbackUrl:a.metadata.adFeedbackUrl||"",clickTrackerUrl:a.metadata.clickTrackerUrl||"",instrumentationPixelUrl:a.metadata.instrumentationPixelUrl||"",trackingPixelUrl:a.metadata.trackingPixelUrl||"",linkUrl:a.metadata.linkUrl||""},c=A.__assign(A.__assign({},c),{sponsoredBrandVideoMetadata:h,isSponsoredBrandVideo:a.metadata.isSponsoredBrandVideo}));
return c},aa=function(a,c,e){var h=[];[].forEach.call(a,function(g,k){var m=g.dataset.asin,f=g.dataset;if(m){m={contentId:m,productAsin:f.productAsin||"",parentAsin:f.parentAsin||"",metadata:{videoImageUrl:f.videoImageUrlUnchanged||f.videoImageUrl||"",videoURL:f.videoUrl||f.videoURL||"",title:f.title||"",formattedDuration:f.formattedDuration||"",vendorName:f.vendorName||"",vendorCode:f.vendorCode||"",referenceId:f.referenceId||"",fullReviewLink:f.referenceUrl||"",videoDetailPageLink:f.videoDetailPageLink||
"vdp/"+m+c.celQueryStringParam,asin:f.asin||"",vendorTrackingId:f.vendorTrackingId||"",relatedProductsAsins:f.relatedProductsAsins||"",closedCaptions:f.closedCaptions||"",creatorType:f.creatorType||"",publicName:f.publicName||"",profileLink:f.profileLink||"",profileImageUrl:f.profileImageUrl||"",aciContentId:f.csaCItemId||"",videoMimeType:f.videoMimeType||"",entityId:f.entityId||"",entityType:f.entityType||"",videoImageHeight:f.videoImageHeight||"",videoImageWidth:f.videoImageWidth||"",videoImagePhysicalId:f.videoImagePhysicalId||
"",videoImageExtension:f.videoImageExtension||"",groupType:f.groupType||""},impressionRecorded:!1,lastPlayingTimestamp:0,index:k,htmlEl:g};"true"===f.isSponsoredBrandVideo&&(g=g.querySelectorAll("."+e.vseSbVideoDataItem)[0])&&(g={adFeedbackUrl:g.dataset.adFeedbackUrl||"",clickTrackerUrl:g.dataset.clickTrackerUrl||"",instrumentationPixelUrl:g.dataset.instrumentationPixelUrl||"",trackingPixelUrl:g.dataset.trackingPixelUrl||"",linkUrl:g.dataset.linkUrl||"",isSponsoredBrandVideo:f.isSponsoredBrandVideo,
videoDetailPageLink:f.vdpUrl||""},m.metadata=A.__assign(A.__assign({},m.metadata),g));h.push(m);k=E["default"].cardRoot.getElementsByClassName(e.vseVideoDataItem)[k];try{f.profileLink&&f.profileImageUrl&&k&&ta(k,k.querySelector("."+e.vseProfilePlaceholder),e.vseVideoThumbnailProfile)}catch(l){r("Exception has occurred while initializing profiles. Exception details: "+l,"ERROR"),q("profileInitializationFailure",1)}try{""!==f.disclosureText&&""!==f.disclosureLink&&k&&ta(k,k.querySelector("."+e.vseVideoCreatorContainer),
e.vseVideoDisclosure)}catch(l){r("Exception has occurred while moving the disclosure link. Exception details: "+l,"ERROR"),q("moveDisclosureElementFailure",1)}}});return h},ta=function(a,c,e){a=a.querySelector("."+e);c&&a&&a.parentNode&&(c.appendChild(a.cloneNode(!0)),a.parentNode.removeChild(a),(c=c.querySelector("."+e))&&c.classList.remove("aok-hidden"))},ua=function(a){var c=K["default"].innerHeight*(400<=a.height()?.1:.2),e=K["default"].innerHeight-a.height()-c;return K["default"].scrollY+e>=
a.offset().top&&K["default"].scrollY+c<=a.offset().top},T=function(){return K["default"].innerWidth>K["default"].innerHeight},v,U=!1,va,ba,y,u,L,ca=!1,da,S,M,z,G,H,I,V=!1,wa=!0,xa=!1,ea,fa=0,W,ya=null,mb=function(a,c,e,h,g,k,m){void 0===g&&(g=!1);void 0===k&&(k=!0);void 0===m&&(m=!1);return A.__awaiter(void 0,void 0,void 0,function(){var f,l,p;return A.__generator(this,function(n){try{L=e;u=c;y=a;V=g;wa=k;xa=m;f=b["default"].now();x={schemaId:"vse.VSECardsEvents.6",producerId:"vsemetrics_widgetcards",
requiredNumOfFields:12};H=E["default"].cardRoot.getElementsByClassName(u.vseVideoDataItem);if(!H)return q("noCardsIngressDom"),N(),[2];0<b["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview").length&&(W=b["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview"),b["default"].on(b["default"].constants.BROWSER_EVENTS.SCROLL,ha),ha());if((l=E["default"].cardRoot.getElementsByClassName(u.vseWidgetPageState))&&l[0]&&l[0].dataset){G=l[0].dataset;v=aa(H,G,u);n=G;var C=
void 0,t,O;void 0===C&&(C="vse_cards");d.deviceType=y?"Mobile":"Desktop";d.pageType=n.client||"Gateway";d.clientPrefix=d.pageType.toLowerCase();d.placement=("Detail"===d.pageType?"VWDP":d.pageType)+"Card-"+d.deviceType;d.metricsPlacement=(b["default"].capabilities.mobile?b["default"].capabilities.isAmazonApp?"mobile_app":"mobile_web":b["default"].capabilities.tablet?b["default"].capabilities.isAmazonApp?"tablet_app":"tablet_web":"desktop_web")+"."+d.placement+"."+C;d.cardId=null!==(t=n.cardId)&&void 0!==
t?t:"";d.creativeId=null!==(O=n.creativeId)&&void 0!==O?O:"";d.requester=n.requester||"VSEWidgetCards";da="vse-component-feed-carousel-"+d.cardId;M="vse-widget-popover-"+d.cardId;if(!b["default"].capabilities.video)return q("videoNotSupported"),[2];F("cardWidgetRendered");var P=v[0].productAsin?v[0].productAsin:"";d.buildCsmPayload=$a({placementContext:d.metricsPlacement,clientId:"VSE",eventSource:"VSEWidgetCards",stringPayload:null!==P&&void 0!==P?P:"",creativeId:d.creativeId});if(y||"Detail"===
d.pageType)qa(f,v,h);else{b["default"].$("."+d.cardId+" [class*=vsePlaceholder] .a-fixed-right-grid-inner").addClass(u.vseNoRightPadding);t=f;try{za(t,h,"vse-carousel-items-added-"+da),za(t,h,"vse:cards:"+d.clientPrefix+":quad:ready")}catch(Q){ia(Q)}b["default"].trigger("vse-card-ready-"+da)}(p=b["default"].capabilities.isAmazonApp&&b["default"].capabilities.android&&(b["default"].capabilities.androidVersion+"").startsWith("8"))?(q("useMshopAutoplayFallback"),N()):(hb(),ib(),jb(),kb(),lb());"gatewayquad"===
d.clientPrefix&&b["default"].trigger("vse:cards:"+d.clientPrefix+":quad:ready");V&&(Aa(null,b["default"].now()),Ba())}else q("pageStateNotFound"),N()}catch(Q){r("fatal exception has occurred. Exception details: "+Q,"FATAL"),q("widgetFatalException"),N()}return[2]})})},za=function(a,c,e){b["default"].off(e);b["default"].on(e,function(){U||(U=!0,v=aa(H,G,u),qa(a,v,c))})},ib=function(a){void 0===a&&(a="click touch");b["default"].declarative("vse-widget-carousel-see-more-"+d.cardId,a,function(){return Ca()});
b["default"].declarative("vse-widget-carousel-custom-action-"+d.cardId,a,function(c){var e;(c=null===(e=c.data)||void 0===e?void 0:e.link)?(Da("widgetCustomActionClicked"),pa["default"].setLocation(c)):Ca()})},Ca=function(){y&&(ca=!0);b["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").find(".vse-carousel-item").first().click();Da("seeMoreLinkClicked")},Da=function(a){F(a);a=d.buildCsmPayload({eventName:d.clientPrefix+":"+a,intPayload:1});B(a,x)},jb=function(){var a=0;b["default"].off("a:popover:afterShow:vse-widget-popover-"+
d.cardId);b["default"].on("a:popover:afterShow:vse-widget-popover-"+d.cardId,function(c){try{if(b["default"].$(c.popover.$popover).addClass(b["default"].$("#"+M).data("cssClass")),a++,ba=!0,1===a){b["default"].$(c.popover.$popover).addClass(u.vseVerticalLightbox);var e=b["default"].now();z&&z.refresh();V?(b["default"].$(c.popover.$popover).addClass(u.vseRemoveAbsolute),ja()):(Aa(c.popover.$popover,e),Ba())}else ja()}catch(h){ia(h)}})},Aa=function(a,c){b["default"].on(d.clientPrefix+":vse:player:registered",
function(){b["default"].$("#"+M+" [class*=_vseWidgetLbVideoBlock_]").first().animate({opacity:1});if(ba){ja();b["default"].$(a).addClass(u.vseRemoveAbsolute);var e=b["default"].now()-c;F("cardWidgetPopoverContentWaitTime",e)}});b["default"].on("vse:cards:"+d.clientPrefix+":componentbuilder:failed",function(){Ea();z?z.hide():b["default"].trigger("vse:cards:"+d.cardId+":secondary:view:close");V||b["default"].delay(function(){pa["default"].setLocation(I.videoDetailPageLink)},500)})},ja=function(){ca&&
b["default"].trigger("vse:"+d.clientPrefix+":page:watchAllClicked");ca=!1;var a={assetSpec:I,lightBoxId:""+M};!0===xa&&ya!==I.contentId&&(ya=I.contentId,a.lazyLoadProductAsin=I.productAsin);b["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxOpened",a);a=b["default"].$("#"+M+" [class*=_vseWidgetLbVideoBlock_]");0<a.length&&(S=a.get(0),null!=L&&(nb(S),L.elect(S)))},kb=function(){b["default"].off("a:popover:beforeHide:vse-widget-popover-"+d.cardId);b["default"].on("a:popover:beforeHide:vse-widget-popover-"+
d.cardId,function(){ba=!1;va?(b["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxClosed"),null!=L&&S&&L.unsubscribe(S)):F("cardWidgetLBClosedBeforeAjax")})},Ba=function(){cb(v,I,G,function(a){va=!0;q("preloadSuccess");b["default"].$("#"+M+" [class*=_vseWidgetLbVideoBlock_]").html(a.responseBody)},function(a){b["default"].trigger("vse:cards:"+d.clientPrefix+":componentbuilder:failed");F("preloadFailed");q("preloadFailed:"+a.statusCode);r("NilgiriService componentbuilder call has failed.\n        Status code: "+
a.statusCode+". Status text: "+a.statusText,"FATAL");N()},wa)},N=function(){var a=E["default"].cardRoot.getElementsByClassName(u.vseSeeMoreLink)[0];a&&a.classList&&a.classList.add("aok-hidden")},hb=function(){try{[].forEach.call(H,function(a){a.children[0].removeAttribute("target")}),Fa(),b["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").delegate(".vse-carousel-item","click",function(a){U||(v=aa(H,G,u),U=!0);if(!b["default"].$(a.target).closest("."+u.vseProfilePlaceholder).length){a.preventDefault();
var c=b["default"].$(a.currentTarget);a=c.closest("li").index();var e=v[a];e.metadata&&(I=ra(e,c),c=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetClicked",intPayload:1,videoAsin:e.contentId}),F("cardWidgetClicked"),B(c,x),bb(a,G.celQueryStringParam),y?b["default"].trigger("vse:cards:"+d.cardId+":secondary:view:open"):(z=Xa["default"].get(b["default"].$("."+d.cardId+" #vse-widget-popover-trigger")),b["default"].objectIsEmpty(z)?q("lbNotFoundDesktop"):z.show()))}})}catch(a){ia(a)}},ia=function(a){r("fatal exception has occurred in LB. Exception details: "+
a,"FATAL");q("lightboxOpenFatalException");N();Ea();z&&z.hide()},Ea=function(){Fa();[].forEach.call(H,function(a,c){a.children&&a.children[0]&&a.children[0].setAttribute("target",v[c].metadata.videoDetailPageLink)})},Fa=function(){b["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").undelegate(".vse-carousel-item","click")},nb=function(a){L.subscribe(a,function(c){},{buffer:0})},lb=function(){b["default"].on(d.clientPrefix+"-leave-pip",function(a){b["default"].$("."+d.cardId+" .vse-cards-ingress-carousel .vse-carousel-item")[a.index].click()})},
Ga=function(a,c){ea[c]||(a=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailPreviewPlaybackStart",intPayload:c,videoAsin:a}),void 0!==a&&null!==a&&(B(a,x),ea[c]=!0))},ha=function(){b["default"].onScreen(b["default"].$(".vse-video-thumbnail-wrapper"),100)&&(b["default"].each(W,function(a){var c=a.getAttribute("data-src");var e=void 0;void 0===e&&(e=1);e=3*(e-1);c=c.split(",")[e];a.src=c;a.addEventListener("ended",ob)}),b["default"].off(b["default"].constants.BROWSER_EVENTS.SCROLL,ha),ea=Array(W.length).fill(!1),
y||pb(),qb(),b["default"].on(b["default"].constants.BROWSER_EVENTS.SCROLL,X),X())},pb=function(){b["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card","mouseenter",function(){ka();var a=b["default"].$(this).find("video"),c=b["default"].$(this).find(".vse-video-thumbnail-img");Ha(c);0<a.length&&(a[0].play(),c=b["default"].$(this).closest("li").index(),Ga(a[0].getAttribute("data-video-asin"),c),fa=0)});b["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card",
"mouseleave",function(){var a=b["default"].$(this).find(".vse-video-thumbnail-img");la(a);a=b["default"].$(this).find("video");0<a.length&&ma(a[0])})},la=function(a){a&&0<a.length&&b["default"].fadeIn(a,300,"ease-in")},Ha=function(a){a&&0<a.length&&b["default"].fadeOut(a,300,"ease-in")},Ia=function(a){a=b["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||0!=a.length)return b["default"].$(a).find("video")[0]},Ja=function(a){a=b["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||
0!=a.length)return b["default"].$(a).find(".vse-video-thumbnail-img")},na=function(a){var c=Ia(a);if(c){var e=Ja(a);Ha(e);c.play();fa=a;Ga(c.getAttribute("data-video-asin"),a)}},X=function(){var a=b["default"].$(".vse-video-widget-container");if(0<a.length&&(!T()&&b["default"].onScreen(a)&&ua(a)||T()&&b["default"].onScreen(a))){b["default"].off(b["default"].constants.BROWSER_EVENTS.SCROLL,X);b["default"].on(b["default"].constants.BROWSER_EVENTS.SCROLL,Ka);a=y?La():fa;var c=Ia(a);if(!c||c.paused)ka(),
na(a)}},Ka=function(){var a=b["default"].$(".vse-video-widget-container");0!=a.length&&(!ua(a)&&!T()||T()&&!b["default"].onScreen(a))&&(b["default"].on(b["default"].constants.BROWSER_EVENTS.SCROLL,X),b["default"].off(b["default"].constants.BROWSER_EVENTS.SCROLL,Ka))},ka=function(){b["default"].each(W,function(a){if(0!==a.currentTime){var c=b["default"].$(a).closest(".vse-video-thumbnail-wrapper").find(".vse-video-thumbnail-img");la(c);ma(a)}})},ma=function(a){setTimeout(function(){a.currentTime=0;
a.load()},300)},La=function(){var a=0;try{var c=b["default"].$(".vse-video-widget-container"),e=parseInt(c.find("li").css("width").replace("px",""))+8,h=c.find("ol").css("-webkit-transform").split(/[()]/)[1],g=Math.abs(parseInt(h.split(",")[4]));a=Math.round(g/e)}catch(k){r("Error has occurred while finding the current focussed Element. Exception details: "+k,"ERROR")}return a},ob=function(a){try{var c=a.target.closest("li");ma(a.target);var e=b["default"].$(c).index()+1;a=0;try{var h=b["default"].$(".vse-video-widget-container"),
g=parseInt(h.find("li").css("width").replace("px","")),k=y?b["default"].$(window).width():b["default"].$(".vse-video-widget-container .a-carousel-viewport").width();a=Math.floor(k/(g+8))}catch(n){r("Error has occurred while finding the no of Thumbnails on screen. Exception details: "+n,"ERROR")}var m=a;var f=Math.ceil(e/m),l=Math.ceil((e+1)/m),p=Ja(e-1);la(p);f===l&&na(e)}catch(n){r("Error has occurred while playing the next preview. Exception details: "+n,"ERROR")}},qb=function(){var a=b["default"].$(".vse-cards-carousel-container");
Za["default"].getCarousel(a).on("change:pageNumber",function(){ka();setTimeout(function(){na(La())},y?100:310)})},J={thumbnailUpdates:"_vse-vw-dp-card_style_thumbnailUpdates__3sx2a",vseVideoImageWrapper:"_vse-vw-dp-card_style_vseVideoImageWrapper__3Sk54",vseCarouselItem:"_vse-vw-dp-card_style_vseCarouselItem__3IvFU",vseCarouselItemHovering:"_vse-vw-dp-card_style_vseCarouselItemHovering__3nydI",vseHoverSection:"_vse-vw-dp-card_style_vseHoverSection__1n4YC",carouselElement:"_vse-vw-dp-card_style_carouselElement__AVBU9",
vseMobileVideoWidget:"_vse-vw-dp-card_style_vseMobileVideoWidget__17sDD",vseDesktopCarousel:"_vse-vw-dp-card_style_vseDesktopCarousel__1UwLK",vseVideoDuration:"_vse-vw-dp-card_style_vseVideoDuration__vDK4S",vseVideoTitle:"_vse-vw-dp-card_style_vseVideoTitle__sPgV5",vseVideoTitleBlockOverlay:"_vse-vw-dp-card_style_vseVideoTitleBlockOverlay__ZyhF4",vseThumbnailSecondaryImg:"_vse-vw-dp-card_style_vseThumbnailSecondaryImg__2eoNE",vseVideoTitleBlock:"_vse-vw-dp-card_style_vseVideoTitleBlock__Qp7Od",vseVideoTitleText:"_vse-vw-dp-card_style_vseVideoTitleText__1lJWI",
vseVideoTitleWithCreator:"_vse-vw-dp-card_style_vseVideoTitleWithCreator__1Meqf",vseHasProfile:"_vse-vw-dp-card_style_vseHasProfile__28XGY",vseVideoCreatorName:"_vse-vw-dp-card_style_vseVideoCreatorName__3M1B_",vseProfilePlaceholder:"_vse-vw-dp-card_style_vseProfilePlaceholder__34FkJ",vseVideoThumbnailProfile:"_vse-vw-dp-card_style_vseVideoThumbnailProfile__1TFKR",vseLazyLoadSpinner:"_vse-vw-dp-card_style_vseLazyLoadSpinner__2XtFC",vseVideoSegmentHeader:"_vse-vw-dp-card_style_vseVideoSegmentHeader__14ouc",
vseFirstItem:"_vse-vw-dp-card_style_vseFirstItem__3h4BK",vseVideoWidgetHeaderBlock:"_vse-vw-dp-card_style_vseVideoWidgetHeaderBlock__2t4B0",vseVideoWidgetHeader:"_vse-vw-dp-card_style_vseVideoWidgetHeader__30B2I",vseWidgetPageState:"_vse-vw-dp-card_style_vseWidgetPageState__2eblq",vseVideoWidgetContainer:"_vse-vw-dp-card_style_vseVideoWidgetContainer__3HDIT",vseIngressCarousel:"_vse-vw-dp-card_style_vseIngressCarousel__2Knkb",vseThumbnailPreviewImg:"_vse-vw-dp-card_style_vseThumbnailPreviewImg__3dlho",
vseCardsVideoThumbnail:"_vse-vw-dp-card_style_vseCardsVideoThumbnail__3xlzJ",vseWidgetLbVideoBlock:"_vse-vw-dp-card_style_vseWidgetLbVideoBlock__VfqBF",vseWidgetLbVideoBlockWrapper:"_vse-vw-dp-card_style_vseWidgetLbVideoBlockWrapper__v6yOr",vseWidgetLbAbsolute:"_vse-vw-dp-card_style_vseWidgetLbAbsolute__bgBq7",vseWidgetLbSpinner:"_vse-vw-dp-card_style_vseWidgetLbSpinner__yjdTV",vseVerticalLightbox:"_vse-vw-dp-card_style_vseVerticalLightbox__12YT2",vseRemoveAbsolute:"_vse-vw-dp-card_style_vseRemoveAbsolute__2xmeK",
vseUploadButton:"_vse-vw-dp-card_style_vseUploadButton__5QCM8",vseUploadButtonIcon:"_vse-vw-dp-card_style_vseUploadButtonIcon__2-eZR",vseVideoDataItem:"_vse-vw-dp-card_style_vseVideoDataItem__2A7tm",vseVwdpWidgetPageState:"_vse-vw-dp-card_style_vseVwdpWidgetPageState__283lp",vseSbVideoDataItem:"_vse-vw-dp-card_style_vseSbVideoDataItem__1TmVd",thumbnailPreviewWrap:"_vse-vw-dp-card_style_thumbnailPreviewWrap__2sqTc",vseSearchVideosInput:"_vse-vw-dp-card_style_vseSearchVideosInput__2CfoS",videoPreviewWrapper:"_vse-vw-dp-card_style_videoPreviewWrapper__vvNVU",
clearSearchInput:"_vse-vw-dp-card_style_clearSearchInput__3ZK67",sponsoredVideoLabel:"_vse-vw-dp-card_style_sponsoredVideoLabel__23SsR"};oa._operationNames=[];oa.card=function(){return A.__awaiter(void 0,void 0,void 0,function(){var a,c,e,h,g,k,m,f,l;return A.__generator(this,function(p){switch(p.label){case 0:a=[".vse-segment-title-RVS_G1",".vse-segment-title-RVS_G2",".vse-segment-title-RVS_G1_T1",".vse-segment-title-RVS_G2_T1"];a.forEach(function(n){b["default"].$(".vse-video-widget-dp-container ."+
J.vseVideoDataItem).find(""+n).first().addClass(J.vseFirstItem)});c=b["default"].capabilities.mobile;e={carouselItemClassName:J.carouselElement,widgetMetricsHandler:function(n,C){var t=b["default"].throttle(function(){n()},500,{leading:!1});b["default"].on(b["default"].constants.BROWSER_EVENTS.RESIZE,function(){n()});b["default"].$("."+d.cardId+" .a-carousel-goto-prevpage").click(function(){C("left");t()});b["default"].$("."+d.cardId+" .a-carousel-goto-nextpage").click(function(){C("right");t()});
c&&(b["default"].off("a:carousel:vse-cards-vw-dp:change:pageNumber"),b["default"].on("a:carousel:vse-cards-vw-dp:change:pageNumber",t))}};if(b["default"].capabilities.mobile&&b["default"].capabilities.isAmazonApp&&(h=E["default"].cardRoot.getElementsByClassName(J.vseVwdpWidgetPageState))&&h[0]&&h[0].dataset){g=h[0].dataset.searchAllVideosTreatment||"C";try{Va["default"].trigger("VSE_VWDP_SEARCHBAR_571449",g),"T1"===g&&(b["default"].$("."+J.vseSearchVideosInput).removeClass("aok-hidden"),k=E["default"].cardRoot.getElementsByTagName("form")[0],
m=k.getElementsByTagName("input")[0],m.addEventListener("focus",function(){b["default"].trigger("vse:detail:searchform:focus")}),f=E["default"].cardRoot.getElementsByClassName(J.clearSearchInput)[0],l=function(){""!==m.value?f.classList.remove("aok-hidden"):f.classList.add("aok-hidden")},m.addEventListener("keyup",l),l(),f.addEventListener("click",function(){m.value="";l();m.focus()}))}catch(n){r("Issue with VWDP Search form: "+n,"ERROR")}}return[4,mb(c,J,null,e,!0,!0)];case 1:return p.sent(),[2]}})})}});
