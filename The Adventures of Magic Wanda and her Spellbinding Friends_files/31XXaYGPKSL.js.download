'use strict';mix_d("TellAmazonDesktopCards__tell-amazon-desktop:tell-amazon-desktop__tGDiAuO5","exports tslib @c/scoped-dom @c/aui-modal @c/browser-operations @c/remote-operations".split(" "),function(R,d,ba,ca,S,da){function T(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var J=T(ba),ea=T(ca),A;(function(a){a.openTellAmazonModal="openTellAmazonModal";a.submitForm="submit"})(A||(A={}));var fa={displaySecondLevel:!0,displayAlert:!0,defaultAlert:"noPersonalInfoAlert",detailSection:{optional:!0,
display:!0,title:"comments"},firstLevel:{values:["images","productName","bulletPoints","otherProductDetails"],title:"pleaseTellUsAboutTheIssue",prompt:"whichPartOfThePage",options:{images:{values:["doesntMatchProduct","offensiveAdultContent","showsExtraItems","imageNotClear","other"],prompt:"whatsTheIssue"},productName:{values:["differentFromProduct","missingInformation","unimportantInformation","incorrectInformation","other"],prompt:"whatsTheIssue"},bulletPoints:{values:["differentFromProduct","missingInformation",
"unimportantInformation","other"],prompt:"whatsTheIssue"},otherProductDetails:{values:"priceIssue missingInformation shippingIssue sizeChartIssue conflictingInformation productQualityIssue incorrectInformation".split(" "),prompt:"whatsTheIssue"}}}},ha={displaySecondLevel:!1,displayAlert:!1,defaultAlert:"noPersonalInfoAlert",detailSection:{optional:!0,display:!1,title:"comments"},firstLevel:{values:["problemWithOrder","contentConflictingMissing","productContentIllegalUnsafeCompliant","other"],title:"pleaseTellUsAboutTheIssue",
prompt:"whatIsWrongWithThisPage",options:{problemWithOrder:{values:["feedbackAboutSeller","feedbackAboutProduct","orderHasntArrived","other"],prompt:"whatIsWrongWithOrder",options:{feedbackAboutSeller:{values:[],prompt:"",alert:"yourAccountAlert",details:{display:!0,optional:!0,title:"comments"}},feedbackAboutProduct:{values:[],prompt:"",alert:"yourAccountAlert",details:{display:!0,optional:!0,title:"comments"}},orderHasntArrived:{values:[],prompt:"",alert:"yourAccountAlert",details:{display:!0,optional:!0,
title:"comments"}},other:{values:[],prompt:"",alert:"yourAccountAlert",details:{display:!0,optional:!0,title:"comments"}}}},contentConflictingMissing:{values:["partOfThisPageDontMatch","issueWithPrice","productInformationMissingOrImproved","other"],prompt:"whatIsTheIssue",options:{partOfThisPageDontMatch:{values:[],prompt:"whichPartsDontMatch",alert:"noPersonalInfoAlert",checkboxes:new Set("reviews images title bulletPoints brand other".split(" ")),details:{display:!0,optional:!0,title:"comments"}},
issueWithPrice:{values:"haveFoundLowerPrice discountCouponError priceDisparity higherShippingCosts pricesForUsedHigher other".split(" "),prompt:"whatsTheIssue",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"comments"}},productInformationMissingOrImproved:{values:"images sizeDimensions releaseInformation modelEdition brand other".split(" "),prompt:"whatInformationMissingImprovement",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"comments"}},other:{values:[],
prompt:"",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"comments"}}}},productContentIllegalUnsafeCompliant:{values:"itsIllegal itsCounterfeit itsOffensive notSafe notCompliant safetyOrComplianceInformationMissing usesMyIntellectualPropertyWithoutPermission other".split(" "),prompt:"whyShouldntThisBeAvailable",options:{itsIllegal:{values:[],prompt:"",alert:"noPersonalInfoAlert",checkboxes:new Set(["goodFaith"]),details:{display:!0,optional:!1,title:"details"}},itsCounterfeit:{values:[],
prompt:"",alert:"noPersonalInfoAlert",checkboxes:new Set(["goodFaith"]),details:{display:!0,optional:!1,title:"details"}},itsOffensive:{values:["sexuallyExplicitContent","other"],prompt:"whyIsItOffensive",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"comments"}},notSafe:{values:["experiencedSafetyIssue","informationShowingItemNotSafe","other"],prompt:"whyIsntThisProductSafe",alert:"noPersonalInfoAlert",checkboxes:new Set(["goodFaith"]),details:{display:!0,optional:!1,title:"details"}},
notCompliant:{values:["contactDetails","warningsMarkings","instructionsForUse","other"],prompt:"whatIsNotCompliantOnTheProduct",alert:"noPersonalInfoAlert",checkboxes:new Set(["goodFaith"]),details:{display:!0,optional:!1,title:"details"}},safetyOrComplianceInformationMissing:{values:["responsiblePersonContactDetails","imagesWarningsMarkings","instructionsForUse","other"],prompt:"whatPieceOfInformationIsNotCompliant",alert:"noPersonalInfoAlert",checkboxes:new Set(["goodFaith"]),details:{display:!0,
optional:!1,title:"details"}},usesMyIntellectualPropertyWithoutPermission:{values:[],prompt:"",alert:"goToPnfAlert",details:{display:!0,optional:!0,title:"comments"}},other:{values:[],prompt:"",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"comments"}}}},other:{values:[],prompt:"",options:{default:{values:[],prompt:"",alert:"noPersonalInfoAlert",details:{display:!0,optional:!0,title:"whatsTheIssue"}}}}}}},D=da.setup(),K,L,w,U,G,r,M,t,N,E,H,V,I,u,W,F,X,m,x,l,y={},ka=function(a,
b){return d.__awaiter(void 0,void 0,void 0,function(){var c;return d.__generator(this,function(e){switch(e.label){case 0:return[4,D.fetchTellAmazonModalContent({})];case 1:return c=e.sent(),a.render(function(h){return d.__awaiter(void 0,void 0,void 0,function(){var f,g;return d.__generator(this,function(k){b&&(h.insertBefore(c,b),ia(h),f=S.setup(),f.define(A.submitForm,"submit",function(z){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(n){switch(n.label){case 0:return[4,
ja(z)];case 1:return n.sent(),[2]}})})}),(g=h.querySelector("#tellAmazonModal_form"))&&f.attach(A.submitForm,g));return[2]})})}),[2]}})})},oa=function(){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(a){P.when("a-dropdown").execute(function(b){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(c){switch(c.label){case 0:return w=b.getSelect("tellAmazon_firstLevelDropdown"),r=b.getSelect("tellAmazon_secondLevelDropdown"),t=b.getSelect("tellAmazon_thirdLevelDropdown"),
[4,la()];case 1:return c.sent(),[4,ma()];case 2:return c.sent(),[2]}})})});P.when("A").execute(function(b){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(c){b.on("a:dropdown:selected:tellAmazon_firstLevelDropdown",na);b.on("a:dropdown:selected:tellAmazon_secondLevelDropdown",Y);b.on("a:dropdown:selected:tellAmazon_thirdLevelDropdown",Z);return[2]})})});return[2]})})},na=function(a){return d.__awaiter(void 0,void 0,void 0,function(){var b,c,e;return d.__generator(this,
function(h){switch(h.label){case 0:O(m.detailSection);G.style.display=m.displaySecondLevel?"block":"none";I.required=!1;M.style.display="none";F.style.display=m.displayAlert?"block":"none";w.update({status:"normal"});r.update({status:"normal"});r.setValue("");t.setValue("");B(!1);aa();b=a.value;x=m.firstLevel.options[b];if(0!==x.values.length)return[3,2];l=null===(e=x.options)||void 0===e?void 0:e.default;return[4,Y()];case 1:return h.sent(),[2];case 2:return G.style.display="block",c=u[x.prompt],
[4,Q(r,x.values,c)];case 3:return h.sent(),[2]}})})},Y=function(a){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(b){switch(b.label){case 0:Z();aa();a&&x.options&&(l=x.options[a.value]);if(!l)return[2];O(l.details);N.style.display="none";E.style.display="none";H.required=!1;return[4,pa(l)];case 1:b.sent();var c;if(l.checkboxes){b=l.checkboxes;E.style.display="block";var e=E.getElementsByTagName("p");try{for(var h=d.__values(Array.from(e)),f=h.next();!f.done;f=
h.next()){var g=f.value;b.has(g.dataset.name)?g.style.display="block":g.style.display="none"}}catch(C){var k={error:C}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(k)throw k.error;}}H.checked=!1;H.required=b.has("goodFaith")?!0:!1}F.style.display="none";var z;if(l.alert){k=l.alert;F.style.display="block";try{for(var n=d.__values(Object.keys(y)),p=n.next();!p.done;p=n.next()){var v=p.value;y[v].style.display=v===k?"block":"none"}}catch(C){var q={error:C}}finally{try{p&&!p.done&&(z=n.return)&&
z.call(n)}finally{if(q)throw q.error;}}}M.style.display=l.checkboxes||0<l.values.length?"block":"none";return[2]}})})},pa=function(a){return d.__awaiter(void 0,void 0,void 0,function(){var b;return d.__generator(this,function(c){switch(c.label){case 0:return b=a.prompt?u[a.prompt]:"",[4,Q(t,a.values,b)];case 1:return c.sent(),0<a.values.length&&(t.update({status:"normal"}),N.style.display="block"),[2]}})})},aa=function(){var a,b=E.getElementsByTagName("input");try{for(var c=d.__values(Array.from(b)),
e=c.next();!e.done;e=c.next())e.value.checked=!1}catch(f){var h={error:f}}finally{try{e&&!e.done&&(a=c.return)&&a.call(c)}finally{if(h)throw h.error;}}},ja=function(a){return d.__awaiter(void 0,void 0,void 0,function(){var b,c,e,h,f;return d.__generator(this,function(g){switch(g.label){case 0:a.event.preventDefault();b=J["default"].cardRoot.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_desktop_div__1Loux")[0];g=0<w.val().length;var k=!0,z=!0;0<r.getOptions().size()&&(k=0<r.val().length);
g||w.update({status:"error"});g&&!k&&r.update({status:"error"});l&&0<l.values.length&&((z=0<t.val().length)||t.update({status:"error"}));if(!(g&&k&&z&&b.dataset.asin))return[3,5];var n;g=[];k={partsOfPage:g,tellAmazon_firstLevelDropdown:""};try{for(var p=d.__values(a.event.target),v=p.next();!v.done;v=p.next()){var q=v.value;q.checked?g.push(q.name):q.value&&0<q.value.length&&"on"!==q.value&&(k[q.name]=q.value)}}catch(qa){var C={error:qa}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(C)throw C.error;
}}c=k;return[4,D.getTreatment({})];case 1:e=g.sent(),h={firstLevelValue:c.tellAmazon_firstLevelDropdown,secondLevelValue:c.tellAmazon_secondLevelDropdown||"",thirdLevelValue:c.tellAmazon_thirdLevelDropdown||"",checkboxes:c.partsOfPage,userComments:c.details||"",asin:b.dataset.asin,weblab:e.weblabName+":"+e.treatment},g.label=2;case 2:return g.trys.push([2,4,,5]),[4,D.sendDefectToHarmattan({formValues:h})];case 3:return(f=g.sent())?(K.style.display="none",L.style.display="block",B(!1)):B(!0),[3,5];
case 4:return g.sent(),B(!0),[3,5];case 5:return[2]}})})},Z=function(){w.update({status:"normal"});r.update({status:"normal"});t.update({status:"normal"});B(!1)},B=function(a){W.style.display=a?"block":"none"},ia=function(a){V=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_details_label__1lDih")[0];I=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_details_text_area__3_n0I")[0];U=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_first_level_dropdown_label__36syI")[0];
W=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_try_again_message__1BEKR")[0];K=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_form_container__1MC8C")[0];L=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_thankyou_container__1Cu-y")[0];G=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_second_level__1xVpa")[0];F=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_alert__14ANY")[0];M=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_third_level__3TdI4")[0];
X=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_details_section__OyMoa")[0];N=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_third_level_dropdown_container__3lTrD")[0];E=a.getElementsByClassName("_tell-amazon-desktop_style_tellAmazonThirdLevelCheckboxContainer__2kR7h")[0];H=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_good_faith_checkbox__3neke")[0];y.noPersonalInfoAlert=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_alert_personal_info__3ZTTb")[0];
y.yourAccountAlert=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_alert_your_account__2x7hR")[0];y.goToPnfAlert=a.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_alert_pnf__1mkcH")[0]},ma=function(){return d.__awaiter(void 0,void 0,void 0,function(){var a;return d.__generator(this,function(b){switch(b.label){case 0:return a=u[m.firstLevel.prompt],[4,Q(w,m.firstLevel.values,a)];case 1:return b.sent(),[2]}})})},la=function(){return d.__awaiter(void 0,void 0,void 0,function(){var a,
b,c,e,h,f;return d.__generator(this,function(g){w.update({status:"normal"});r.update({status:"disabled"});t.update({status:"disabled"});m.displaySecondLevel||(G.style.display="none");m.displayAlert||(F.style.display="none");try{for(a=d.__values(Object.keys(y)),b=a.next();!b.done;b=a.next())c=b.value,y[c].style.display=c===m.defaultAlert?"block":"none"}catch(k){h={error:k}}finally{try{b&&!b.done&&(f=a.return)&&f.call(a)}finally{if(h)throw h.error;}}e=m.firstLevel.title;U.innerHTML=u[e];O(m.detailSection);
B(!1);return[2]})})},O=function(a){var b=u[a.title];b+=a.optional?" ("+u.optional+")":"";V.innerHTML=b;X.style.display=a.display?"block":"none";I.required=!a.optional;I.value=""},Q=function(a,b,c){return d.__awaiter(void 0,void 0,void 0,function(){var e;return d.__generator(this,function(h){switch(h.label){case 0:return a.update({option_prompt:c}),a.removeOptions(),a.setValue(""),e=b.map(function(f){return{value:f,text:u[f]}}),[4,a.addOptions(e)];case 1:return h.sent(),[2]}})})};R._operationNames=
["sendDefectToHarmattan","getStrings","fetchTellAmazonModalContent","getTreatment"];R.card=function(){return d.__awaiter(void 0,void 0,void 0,function(){var a,b,c,e;return d.__generator(this,function(h){if(a=J["default"].cardRoot.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_desktop_link__3adsG")[0])b=J["default"].cardRoot.getElementsByClassName("_tell-amazon-desktop_style_tell_amazon_modal_end__30n3x")[0],c=ea["default"].create("tellAmazon-modal","._tell-amazon-desktop_style_tell_amazon_modal_root__1q10s.aok-hidden",
{a11yOpenMessage:"Report an issue",closeButton:!1}),e=S.setup(),e.define(A.openTellAmazonModal,"click",function(){return d.__awaiter(void 0,void 0,void 0,function(){var f;return d.__generator(this,function(g){switch(g.label){case 0:return[4,D.getTreatment({})];case 1:return f=g.sent(),m=(g=f.treatment)&&"T1"===g?ha:fa,[4,D.getStrings({})];case 2:return u=g.sent(),[4,c.show()];case 3:return g.sent(),K.style.display="block",L.style.display="none",[2]}})})}),e.attach(A.openTellAmazonModal,a),c.once("beforeShow",
function(){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(f){switch(f.label){case 0:return[4,ka(c,b)];case 1:return[2,f.sent()]}})})}),c.once("afterShow",function(){return d.__awaiter(void 0,void 0,void 0,function(){return d.__generator(this,function(f){switch(f.label){case 0:return[4,oa()];case 1:return[2,f.sent()]}})})});return[2]})})}});
